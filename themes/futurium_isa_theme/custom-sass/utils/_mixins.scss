// -----------------------------------------------------------------------------
// This file contains all application-wide Sass mixins.
// -----------------------------------------------------------------------------


/// Event wrapper
/// @author Harry Roberts
/// @param {Bool} $self [false] - Whether or not to include current selector
/// @link https://twitter.com/csswizardry/status/478938530342006784 Original tweet from Harry Roberts
@mixin on-event($self: false) {
  @if $self {
    &,
    &:hover,
    &:active,
    &:focus {
      @content;
    }
  } @else {
    &:hover,
    &:active,
    &:focus {
      @content;
    }
  }
}

/// Make a context based selector a little more friendly
/// @author Hugo Giraudel
/// @param {String} $context
@mixin when-inside($context) {
  #{$context} & {
    @content;
  }
}

/// Responsive manager
/// @param {String} $breakpoint - Breakpoint
/// @requires $breakpoints
/// @link http://sass-guidelin.es/#breakpoint-manager Sass Guidelines - Breakpoint Manager
@mixin respond-to($breakpoint) {
  $query: map-get($breakpoints, $breakpoint);
  
  @if not $query {
    @error 'No value found for `#{$breakpoint}`. Please make sure it is defined in `$breakpoints` map.';
  }

  @media #{if(type-of($query) == 'string', unquote($query), inspect($query))} {
    @content;
  }
}

/// Flexbox
/// Used for eq height of boxes.

@mixin flexbox() {
  display: -webkit-box;
  display: -moz-box;
  display: -ms-flexbox;
  display: -webkit-flex;
  display: flex;
}

@mixin flex($values) {
  -webkit-box-flex: $values;
  -moz-box-flex:  $values;
  -webkit-flex:  $values;
  -ms-flex:  $values;
  flex:  $values;
}

@mixin order($val) {
  -webkit-box-ordinal-group: $val;  
  -moz-box-ordinal-group: $val;     
  -ms-flex-order: $val;     
  -webkit-order: $val;  
  order: $val;
}


/// mixin for transition

@mixin transition($args...) {
  -webkit-transition: $args;
  -moz-transition: $args;
  -ms-transition: $args;
  -o-transition: $args;
  transition: $args;
}


/// Responsive breakpoints

@mixin respond-to($breakpoint) {
  @if $breakpoint == "small" {
    @media (max-width: 768px) {
      @content;
    }
  }

  @else if $breakpoint == "medium" {
    @media (min-width: 768px) and (max-width: 1024px) {
      @content;
    }
  }

  @else if $breakpoint == "large" {
    @media (min-width: 1200px) {
      @content;
    }
  }
}

/// Font-size in pixels & rem
/// list-separator polyfill by Hugo Giraudel (https://sass-compatibility.github.io/#list_separator_function)
@function rem-separator($list) {
  @if function-exists("list-separator") == true {
    @return list-separator($list);
  }

  $test-list: ();
  @each $item in $list {
    $test-list: append($test-list, $item, space);
  }

  @return if($test-list == $list, space, comma);
}

@mixin rem-baseline($zoom: 100%) {
  font-size: $zoom / 16px * $rem-baseline;
}

@function rem-convert($to, $values...) {
  $result: ();
  $separator: rem-separator($values);

  @each $value in $values {
    @if type-of($value) == "number" and unit($value) == "rem" and $to == "px" {
      $result: append($result, $value / 1rem * $rem-baseline, $separator);
    } @else if type-of($value) == "number" and unit($value) == "px" and $to == "rem" {
      $result: append($result, $value / ($rem-baseline / 1rem), $separator);
    } @else if type-of($value) == "list" {
      $result: append($result, rem-convert($to, $value...), $separator);
    } @else {
      $result: append($result, $value, $separator);
    }
  }

  @return if(length($result) == 1, nth($result, 1), $result);
}

@function rem($values...) {
  @if $rem-px-only {
    @return rem-convert(px, $values...);
  } @else {
    @return rem-convert(rem, $values...);
  }
}

@mixin rem($properties, $values...) {
  @if type-of($properties) == "map" {
    @each $property in map-keys($properties) {
      @include rem($property, map-get($properties, $property));
    }
  } @else {
    @each $property in $properties {
      @if $rem-fallback or $rem-px-only {
        #{$property}: rem-convert(px, $values...);
      }
      @if not $rem-px-only {
        #{$property}: rem-convert(rem, $values...);
      }
    }
  }
}

/// Vertically Centered

@mixin vertically-centered
{
    display: flex;
    align-items: center;
    justify-content: center;
}


/// PROJECT SPECEFIC MIXINS ////
/// PROJECT SPECEFIC MIXINS ////
/// PROJECT SPECEFIC MIXINS ////

/// Base for a button 



@mixin btn-default($color) {
  @include rem(padding, 10px 10px 10px 10px);
  @include rem(font-size, 14px);
  background: $color;
  display: inline-block;
  border-radius: 0px;
  border: none;
  color: #fff;
  @include on-event {
    background-color: darken($color, 10%); 
    color: #fff; 
  } 
}

@mixin panel{
  @include rem(margin, 0 0 30px 0);
  background: $light-grey;
  border: 1px solid darken($light-grey, 10%);
}

/* sets an icon for the teaser title */

@mixin icon-node-teaser($color, $icon) {
  color:#fff;
  border-radius: 50%;
  @include rem(width, 35px);
  @include rem(height, 35px);
  @include rem(margin-right, 10px);
  background: $color;
  @include fa($icon);    
}

/* mixin for the font awesome icons */

@mixin fa($icon) {
    @extend .fa;
    @extend .fa-#{$icon};
    padding-right: 8px;
   /* display: inline-block; */
}

/* mixin for layout content types (does markup of row1) */

@mixin contenttype($color, $icon) {
    
  a {
    color: $color;
    @include on-event {
      color: $color;
    }
  }

  .more-link a, a.more-link {
    @include btn-default($color);
  } 

  /* row1 theming */
  .container-fullwidth.row1 {
    background: $color; 
    border-top: 3px solid darken($color, 15%);
    border-bottom: 1px solid darken($color, 15%);
    .field-name-author {
      @include rem(border-bottom, 1px solid lighten($color, 20%));
    }
  }

  .row1{
    .share-links a, .flag-link-toggle, a.btn-more, .more-link a, .btn {
      @include btn-default($color);
      background-color: darken($color, 10%); 
      @include on-event {
        background-color: darken($color, 15%);
      }
    }
    h1 {
      @include rem(padding, 0 0 0 0);
      @include rem(margin, 0 0 20px 0);
    }
    h1:before {
      @include fa($icon);
      @include rem(padding, 18px);
      @include rem(margin, 0 0.5em 0 0);
      @include rem(font-size, 36px); 
      color: $color;
      text-align: center;
      border-radius: 50%;
      width: 70px;
      line-height: 35px; 
      background: #fff;
    }
    .group-shortcut-buttons a{
      @include rem(margin, 0 10px 0 0);
    } 
  }

  /* links to edit / manage display / ... */
  .container-top {
    background-color: darken($color, 20%);
    @include rem(padding, 20px 0 0 0);
    /* temp fix? should header1 be removed from page.tpl.php */
    .alert{
      @include rem(margin, 20px 0 20px 0);  
    }
    h1.page-header {
      display: none;
    }
    a {
      color: #fff;
      @include on-event {
        color: $text-color;
      }
    }

  }

}



@mixin teaser($color) {
  a {
    color: $color;
    @include on-event {
      color: $color;
    }
  }

  h2 a, h3 a {
    color: darken($text-color, 2%);
    @include on-event {
      color: $color;
    }
  }

  .btn-primary, .flag-action, .unflag-action, .flag-like a, .more-link a, 
  .share-links a, a.btn-more {
    @include btn-default($color);
  }
}

@mixin blockhp($color) {
  h2 {
    @include rem(padding, 10px 15px 10px 15px);
    @include rem(margin, 0);
    @include rem(font-size, 20px);
    color: #fff;
    background: $color;

  }
  .pane-content {
    @include rem(padding, 15px);
    background: #f8f8f8;
    @include rem (border, 1px solid #d7d7d7);
    border-top: none;
  }
}

@mixin views-row-border {
  .views-row {
    @include rem(padding, 40px 0 40px 0);
    @include rem(border-bottom, 5px solid #d7d7d7);
    div.node-teaser {
      padding: 0;
    }
  }
  .views-row-first {
    @include rem(padding-top, 0);
  }
  .views-row-last {
    border-bottom: none;
  } 
  h3 {
    margin-top: 0;
  }
  
}


/* temp stuff */

.navbar-nav .last {
  display: none;
}

